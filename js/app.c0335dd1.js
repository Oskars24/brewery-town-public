(function(e){function n(n){for(var o,r,c=n[0],u=n[1],s=n[2],l=0,f=[];l<c.length;l++)r=c[l],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);d&&d(n);while(f.length)f.shift()();return a.push.apply(a,s||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],o=!0,c=1;c<t.length;c++){var u=t[c];0!==i[u]&&(o=!1)}o&&(a.splice(n--,1),e=r(r.s=t[0]))}return e}var o={},i={app:0},a=[];function r(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=e,r.c=o,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(t,o,function(n){return e[n]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="/brewery-town-public/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=n,c=c.slice();for(var s=0;s<c.length;s++)n(c[s]);var d=u;a.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("cd49")},"0220":function(e,n,t){"use strict";t("ff19")},"238e":function(e,n,t){"use strict";t("4e11")},"4e11":function(e,n,t){},"5f35":function(e,n,t){e.exports={publicPath:"/brewery-town-public/"}},7989:function(e,n,t){},c510:function(e,n,t){"use strict";t("7989")},cd49:function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var o=t("7a23"),i={id:"app"};function a(e,n){var t=Object(o["u"])("router-view");return Object(o["n"])(),Object(o["c"])("div",i,[Object(o["d"])(t)])}t("c510");const r={};r.render=a;var c=r,u=t("6c02");function s(e,n,t,i,a,r){var c=Object(o["u"])("new-scene");return Object(o["n"])(),Object(o["c"])("div",null,[Object(o["d"])(c)])}var d=t("d4ec"),l=t("262e"),f=t("2caf"),v=t("9ab4"),b=t("ce1f"),y=Object(o["y"])("data-v-549912f1");Object(o["r"])("data-v-549912f1");var p={class:"container"},m={class:"scene",ref:"sceneRef"};Object(o["o"])();var w=y((function(e,n,t,i,a,r){return Object(o["n"])(),Object(o["c"])("div",p,[Object(o["d"])("div",m,null,512)])})),g=(t("a623"),t("7db0"),t("4160"),t("caad"),t("45fc"),t("b0c0"),t("07ac"),t("2532"),t("159b"),t("5a89")),h=t("4721"),x=t("34ad"),K=t("32d9"),O=t("93e9"),R=t("f7dd"),j={setup:function(){var e,n=new g["Bb"]({antialias:!0}),t=new g["ib"],i=new g["i"],a=new g["gb"],r={},c={},u={},s={},d=Object(o["t"])(null),l=function e(n,t,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,c=t.find((function(e){return e.name===o})),s=n.clipAction(c);s.timeScale=i,u["Robot"][2].isPlaying&&(r=0,setTimeout((function(){e(n,t,o,i,!0,1)}),1e3*u["Robot"][2].duration)),c.isPlaying=!0,a?s.setEffectiveWeight(r).play():(s.setLoop(g["G"]),s.reset().setEffectiveTimeScale(.5).setEffectiveWeight(1).play())},f=function(e,n,t){var o=n.find((function(e){return e.name===t})),i=e.clipAction(o);i.stop()},v=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=e.every((function(e){return!0===s[e]}));if(n){var o=n.every((function(e){return!1===s[e]||void 0===s[e]}));return t&&o}return t},b=function(e){return e.some((function(e){return!0===s[e]}))},y=function(){var e=new g["yb"](r["Robot"].position.x,r["Robot"].position.y,r["Robot"].position.z),n=5;e.y+=n;var t=.18,o=6,i=0,c=new g["yb"];v(["ShiftLeft"])&&(t*=2),v(["KeyW"],["KeyA","KeyS","KeyD"])?(i=180,c.z=-1*t,e.z+=-1*t):v(["KeyA"],["KeyW","KeyS","KeyD"])?(i=-90,c.x=-1*t,e.x+=-1*t):v(["KeyS"],["KeyW","KeyA","KeyD"])?(i=0,c.z=1*t,e.z+=1*t):v(["KeyD"],["KeyW","KeyA","KeyS"])?(i=90,c.x=1*t,e.x+=1*t):v(["KeyW","KeyA"])?(i=-135,c.x=-1*t,c.z=-1*t,e.x+=-1*t,e.z+=-1*t):v(["KeyW","KeyD"])?(i=135,c.x=1*t,c.z=-1*t,e.x+=1*t,e.z+=-1*t):v(["KeyS","KeyA"])?(i=-45,c.x=-1*t,c.z=1*t,e.x+=-1*t,e.z+=1*t):v(["KeyS","KeyD"])&&(i=45,c.x=1*t,c.z=1*t,e.x+=1*t,e.z+=1*t),a.set(e,new g["yb"](0,-1,0));var u=a.intersectObject(r["floor"],!0);return u[0]&&u[0].distance-n<o?(c.y=-u[0].distance+n,{move:c,angle:i}):(c.x=0,c.y=0,c.z=0,{move:c,angle:i})},p=function(){if(c["Robot"]){if(b(["KeyW","KeyA","KeyS","KeyD"])){var e=1;v(["ShiftLeft"])&&(e=2),l(c["Robot"],u["Robot"],"Robot_Running",e)}else f(c["Robot"],u["Robot"],"Robot_Running");b(["Space"])&&l(c["Robot"],u["Robot"],"Robot_Jump",1,!1)}},m=function(e){s[e.code]=!1,p()},w=function(e){s[e.code]=!0,p()};return window.addEventListener("keydown",w),window.addEventListener("keyup",m),Object(o["l"])((function(){var o,a=d.value;e=new g["W"](60,a.clientWidth/a.clientHeight,1,1e3),e.position.set(55,55,55),n.setSize(a.clientWidth,a.clientHeight),a.appendChild(n.domElement);var l=new x["a"];l.load("/peach_castle/scene.gltf",(function(e){var n=e.scene;t.add(n),e.animations.length&&(o=new g["b"](n),o.clipAction(e.animations[0]).play())}),void 0,(function(e){console.error(e)})),l.load("/Robot.gltf",(function(e){var n=e.scene;n.userData.name="Robot",t.add(n),n.position.set(5,12,0),r[n.userData.name]=n,u[n.userData.name]=e.animations,u[n.userData.name].forEach((function(e){e.isPlaying=!1})),c[n.userData.name]=new g["b"](n),c[n.userData.name].addEventListener("finished",(function(e){e.action._clip.isPlaying=!1,console.log("animacja skonczona")}))}),void 0,(function(e){console.error(e)})),l.load("/peach_castle/floor.gltf",(function(e){var n=e.scene;n.userData.name="floor",n.visible=!1,t.add(n),r[n.userData.name]=n}),void 0,(function(e){console.error(e)}));var f=new g["q"](16777215,2236962,1),v=new g["k"](16777215,4);v.position.set(10,10,10),t.add(f,v);var b=new h["a"](e,n.domElement);b.enableDamping=!0,b.dampingFactor=.05,b.screenSpacePanning=!1,b.minDistance=10,b.maxDistance=500;var p=new K["a"](n),m=new O["a"](t,e);p.addPass(m);var w=new R["a"](window.innerWidth*n.getPixelRatio(),window.innerHeight*n.getPixelRatio());p.addPass(w);var j=function(){n.render(t,e)},z=function e(){for(var n in requestAnimationFrame(e),"undefined"!==typeof o&&o.update(i.getDelta()),c)c[n].update(i.getDelta());if(Object.values(s).includes(!0)){var t=y();r["Robot"].position.add(t.move),r["Robot"].rotation.y=t.angle*(Math.PI/180)}b.update(),j()};z()})),Object(o["m"])((function(){window.removeEventListener("keydown",w),window.removeEventListener("keyup",m)})),{camera:e,renderer:n,scene:t,clock:i,raycaster:a,objects:r,mixers:c,animations:u,pressedKeys:s,sceneRef:d,playAnimation:l,stopAnimation:f,testAllKeys:v,testAnyKeys:b,checkKeysState:y,robotRunning:p,keyUp:m,keyDown:w}}};t("0220");j.render=w,j.__scopeId="data-v-549912f1";var z=j,P=Object(o["y"])("data-v-aa383822");Object(o["r"])("data-v-aa383822");var D={class:"container"},S={class:"scene",ref:"sceneRef"};Object(o["o"])();var A=P((function(e,n,t,i,a,r){return Object(o["n"])(),Object(o["c"])("div",D,[Object(o["d"])("div",S,null,512)])})),E=t("3191"),W=t.n(E);function k(e,n,t){var i=new g["ib"],a=new g["Bb"]({antialias:!0}),r=new g["W"],c=Object(o["t"])(),u=[],s=new h["a"](r,a.domElement),d=function(){r.aspect=window.innerWidth/window.innerHeight,r.updateProjectionMatrix(),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.setSize(window.innerWidth,window.innerHeight)};return Object(o["l"])((function(){r.fov=60,r.aspect=e.value?e.value.clientWidth/e.value.clientHeight:window.innerWidth/window.innerHeight,r.near=1,r.far=1e3,r.position.set(n.x+t.x,n.y+t.y,n.z+t.z),r.updateProjectionMatrix(),a.setSize(e.value.clientWidth,e.value.clientHeight),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),e.value.appendChild(a.domElement),window.addEventListener("resize",d);var o=new W.a;o.showPanel(0),document.body.appendChild(o.dom),s.enableDamping=!0,s.dampingFactor=.05,s.screenSpacePanning=!1,s.minDistance=10,s.maxDistance=500,s.enablePan=!1,s.enableRotate=!1,s.enableZoom=!1,s.target=n;var c=function(){a.render(i,r)},l=function e(){o.begin(),requestAnimationFrame(e),s.update(),u.forEach((function(e){e()})),c(),o.end()};l()})),Object(o["m"])((function(){window.removeEventListener("resize",d)})),{scene:i,renderer:a,camera:r,animateFunctions:u,animation:c,controls:s}}function L(e){Object(o["l"])((function(){var n=new g["q"](16777215,2236962,3.5),t=new g["k"](16777215,3);t.position.set(10,30,10),e.add(n)}))}function M(e,n,t){Object(o["l"])((function(){var o=new K["a"](t),i=new O["a"](e,n);o.addPass(i);var a=new R["a"](window.innerWidth*t.getPixelRatio(),window.innerHeight*t.getPixelRatio());o.addPass(a)}))}function _(e,n,t,i,a){Object(o["l"])((function(){e.load(i,(function(e){var t=e.scene;n.add(t)}),void 0,(function(e){console.error(e)})),e.load(a,(function(e){var o=e.scene;o.userData.name="floor",o.visible=!1,n.add(o),t[o.userData.name]=o}),void 0,(function(e){console.error(e)}))}))}var C=t("1209");function H(e,n,t,i,a,r,c,u,s,d,l,f,v,b,y,p,m,w){var h=new g["gb"],x=new g["i"],K=!1,O=null,R=0,j=function(e,n,t){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=n.find((function(e){return e.name===t})),c=e.clipAction(r);(c.setEffectiveTimeScale(i),a||c.time!=c.getClip().duration||c.reset(),a||c==O)||(K=!0,c.setLoop(g["G"],1),c.setEffectiveWeight(1).reset(),null===(o=O)||void 0===o||o.fadeOut(z(O,c)),O=c);K?O&&O.time/O.getClip().duration>=.75&&(K=!1,c.fadeIn(z(c,O)).reset(),O=c):(c.setEffectiveWeight(1),O=c)},z=function(e,n){var t=e.getClip().duration/e.getEffectiveTimeScale(),o=n.getClip().duration/n.getEffectiveTimeScale();return.25*o>t?t:.25*o},P=function(e,n,t){var o=n.find((function(e){return e.name===t})),i=e.clipAction(o);i.setEffectiveWeight(0)},D=function(){w.value=Object(C["a"])({targets:y.position,easing:"easeOutCirc",duration:1e3,complete:function(){w.value=null},x:t["Robot"].position.x+m.x,y:t["Robot"].position.y+m.y,z:t["Robot"].position.z+m.z}),w.value=Object(C["a"])({targets:b.target,easing:"easeOutCirc",duration:2e3,complete:function(){w.value=null},x:t["Robot"].position.x,y:t["Robot"].position.y,z:t["Robot"].position.z})},S=function(){var e,n=t["Robot"].position.clone(),o=180*t["Robot"].rotation.y/Math.PI,i=W(t["Robot"]),a=i.max.y-i.min.y,r=n.clone();r.y+=a;var u=.18,s=1,l=1.2,v=5,b=o,y=new g["yb"],p=2200==(null===(e=O)||void 0===e?void 0:e.loop),m=f();!c(["ShiftLeft"])&&!d([7])||p||(u*=2),c(["KeyW"],["KeyA","KeyS","KeyD"])||d([12],[13,14,15])?(b=180,y.z=-1*u,r.z+=-1*u-s):c(["KeyA"],["KeyW","KeyS","KeyD"])||d([14],[12,13,15])?(b=-90,y.x=-1*u,r.x+=-1*u-s):c(["KeyS"],["KeyW","KeyA","KeyD"])||d([13],[12,14,15])?(b=0,y.z=1*u,r.z+=1*u+s):c(["KeyD"],["KeyW","KeyA","KeyS"])||d([15],[12,13,14])?(b=90,y.x=1*u,r.x+=1*u+s):c(["KeyW","KeyA"])||d([12,14])?(b=-135,y.x=-1*u,y.z=-1*u,r.x+=-1*u-s,r.z+=-1*u-s):c(["KeyW","KeyD"])||d([12,15])?(b=135,y.x=1*u,y.z=-1*u,r.x+=1*u+s,r.z+=-1*u-s):c(["KeyS","KeyA"])||d([13,14])?(b=-45,y.x=-1*u,y.z=1*u,r.x+=-1*u-s,r.z+=1*u+s):(c(["KeyS","KeyD"])||d([13,15]))&&(b=45,y.x=1*u,y.z=1*u,r.x+=1*u+s,r.z+=1*u+s),m&&(b=m.angle,y.x=m.x*u,y.z=m.z*u,r.x+=m.x*u+(m.x>0?s:-s),r.z+=m.z*u+(m.z>0?s:-s)),D();var w=Math.abs(o-b);p&&w>45&&w<315&&(b=o,y.x=0,y.z=0),h.set(r,new g["yb"](0,-1,0));var x=h.intersectObject(t["floor"],!0),K=Math.abs(i.min.y-n.y),j=x[0]?x[0].distance-a:0,z=!(j>=0);return x[0],x[0]&&Math.abs(j)<l+K&&z?p?(K>=Math.abs(j)?y.y=0:R<Math.abs(j+K)?(y.y=Math.abs(j+K),O&&O.warp(O.timeScale,4*O.timeScale,O.getClip().duration-O.time)):y.y=0,R=Math.abs(j+K),{move:y,angle:b}):(R=0,y.y=-x[0].distance+a,{move:y,angle:b}):x[0]&&j<v&&!z?(y.y=-x[0].distance+a,{move:y,angle:b}):(y.x=0,y.y=0,y.z=0,{move:y,angle:b})},A=function(){if(a["Robot"]){if(u(["KeyW","KeyA","KeyS","KeyD"])||l([12,13,14,15])||f()){var e=1;(c(["ShiftLeft"])||d([7]))&&(e=2),j(a["Robot"],i["Robot"],"Robot_Running",e)}else P(a["Robot"],i["Robot"],"Robot_Running");(u(["Space"])||d([0]))&&j(a["Robot"],i["Robot"],"Robot_Jump",.6,!1)}},E=function(){for(var e in a)a[e].update(x.getDelta());if(Object.values(r).includes(!0)||K||s.value[0]){var n=S();t["Robot"].position.add(n.move),t["Robot"].rotation.y=n.angle*(Math.PI/180)}},W=function(e){for(var n=new g["lb"](e),t={x:1/0,y:1/0,z:1/0},o={x:-1/0,y:-1/0,z:-1/0},i=0;i<n.bones.length;i++){var a=n.bones[i],r=new g["yb"];a.getWorldPosition(r),r.x<t.x&&(t.x=r.x),r.y<t.y&&(t.y=r.y),r.z<t.z&&(t.z=r.z),r.x>o.x&&(o.x=r.x),r.y>o.y&&(o.y=r.y),r.z>o.z&&(o.z=r.z)}return{min:t,max:o}};return Object(o["l"])((function(){e.load(v,(function(e){var o=e.scene;o.userData.name="Robot",o.position.set(p.x,p.y,p.z),n.add(o),t[o.userData.name]=o,i[o.userData.name]=e.animations,a[o.userData.name]=new g["b"](o),a[o.userData.name].addEventListener("finished",(function(e){K=!1,A()})),i[o.userData.name].forEach((function(e){a[o.userData.name].clipAction(e).setEffectiveWeight(0).play()}))}),void 0,(function(e){console.error(e)}))})),{robotRunning:A,toAnimate:E}}function F(e){var n=[],t=Object(o["t"])([]),i=function(n){e[n.code]=!1},a=function(n){e[n.code]=!0},r=function(e){console.log(e.gamepad.id,"podłączony")},c=function(e){console.log(e.gamepad.id,"odłączony")},u=function(){t.value=navigator.getGamepads()},s=function(){n.forEach((function(e){e()}))};window.addEventListener("keydown",a),window.addEventListener("keyup",i),window.addEventListener("gamepadconnected",r),window.addEventListener("gamepaddisconnected",c);var d=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=n.every((function(n){return!0===e[n]}));if(t){var i=t.every((function(n){return!1===e[n]||void 0===e[n]}));return o&&i}return o},l=function(n){return n.some((function(n){return!0===e[n]}))},f=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=e.every((function(e){var n;return null===(n=t.value[0])||void 0===n?void 0:n.buttons[e].pressed}));if(n){var i=n.every((function(e){var n;return!(null!==(n=t.value[0])&&void 0!==n&&n.buttons[e].pressed)}));return o&&i}return o},v=function(){if(t.value[0]){var e,n,o=.3,i=null===(e=t.value[0])||void 0===e?void 0:e.axes[0],a=null===(n=t.value[0])||void 0===n?void 0:n.axes[1],r=180*Math.atan2(a,-i)/Math.PI,c={angle:r-90,x:i,z:a};if(Math.abs(i)>o||Math.abs(a)>o)return c}},b=function(e){return e.some((function(e){var n;return null===(n=t.value[0])||void 0===n?void 0:n.buttons[e].pressed}))};return Object(o["m"])((function(){window.removeEventListener("keydown",a),window.removeEventListener("keyup",i),window.removeEventListener("gamepadconnected",r),window.addEventListener("gamepaddisconnected",c)})),{testAllKeys:d,testAnyKeys:l,keysFunctions:n,checkPressedKeys:s,testAllButtons:f,testAnyButton:b,testAxis:v,checkPads:u,gamepads:t}}var I=t("5f35"),T={setup:function(){var e=new g["yb"](5,11.5,0),n=new g["yb"](2.5,15,25),t=Object(o["t"])(null),i=k(t,e,n),a=i.scene,r=i.renderer,c=i.camera,u=i.animateFunctions,s=i.animation,d=i.controls;L(a),M(a,c,r);var l=new x["a"],f={};_(l,a,f,"".concat(I["publicPath"],"peach_castle/scene.gltf"),"".concat(I["publicPath"],"/peach_castle/floor.gltf"));var v={},b=F(v),y=b.testAllKeys,p=b.testAnyKeys,m=b.keysFunctions,w=b.checkPressedKeys,h=b.testAllButtons,K=b.testAnyButton,O=b.testAxis,R=b.checkPads,j=b.gamepads;u.push(w,R);var z={},P={},D=H(l,a,f,z,P,v,y,p,j,h,K,O,"".concat(I["publicPath"],"Robot_edited.glb"),d,c,e,n,s),S=D.robotRunning,A=D.toAnimate;return u.push(A),m.push(S),{sceneRef:t,camera:c,animations:z,mixers:P}}};t("238e");T.render=A,T.__scopeId="data-v-aa383822";var B=T,q=function(e){Object(l["a"])(t,e);var n=Object(f["a"])(t);function t(){return Object(d["a"])(this,t),n.apply(this,arguments)}return t}(b["b"]);q=Object(v["a"])([Object(b["a"])({components:{Scene:z,NewScene:B}})],q);var J=q;J.render=s;var G=J,N=[{path:"/",name:"Home",component:G}],U=Object(u["a"])({history:Object(u["b"])("/brewery-town-public/"),routes:N}),Z=U,Q=t("5502"),V=Object(Q["a"])({state:{},mutations:{},actions:{},modules:{}});Object(o["b"])(c).use(V).use(Z).mount("#app")},ff19:function(e,n,t){}});
//# sourceMappingURL=app.c0335dd1.js.map